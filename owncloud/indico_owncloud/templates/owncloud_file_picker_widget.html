{% extends 'forms/base_widget.html' %}

{% block html %}
    <div class="owncloudfilepicker i-form-field-fixed-width">
        <input type="hidden" name="{{ field.name }}" id="{{ field.id }}-files" {{ input_args | html_params }}>
        <input type="hidden" name="{{ field.name }}" id="{{ field.id }}-token" {{ input_args | html_params }}>
        <span id="{{ field.id }}-container">
            <file-picker
                id="{{ field.id }}-file-picker"
                variation="resource"
                config-object="{{ field.auth_settings | tojson | forceescape }}"
                is-select-btn-displayed=false
            ></file-picker>
        </span>
    </div>
{% endblock %}

{% block javascript %}
    <script>
        setupOwncloudFilePickerWidget({
            config: {{ field.auth_settings | tojson }},
            fieldId: {{ field.id | tojson }},
            required: {{ input_args.required | default(false) | tojson }},
            disabled: {{ input_args.disabled | default(false) | tojson }},
        });
    </script>
{% endblock %}
